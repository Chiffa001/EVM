<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="shortcut icon" href="../img/mouse.png" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../css/style.css" />
    <title>Джойстик</title>
  </head>
  <body>
    <div class="wrapper">
      <div class="container main">
        <h1 class="main__title">Джойстки</h1>
        <div class="go-home">
          <a href="../../index.html"
            ><img src="../img/home.png" alt="go home"
          /></a>
        </div>
        <section class="intro">
          <h2 class="visually-hidden">Введение в джойстики</h2>
          <p class="intro__text">
            Джо́йстик (англ. Joystick (Joy + Stick) — дословно «палочка
            удовольствий») — устройство ввода информации, которое представляет
            собой манипулятор, посредством которого можно задавать экранные
            координаты графического объекта; также может выполнять функции
            клавиатуры.
          </p>
          <div class="d-flex flex-column flex-center">
            <figure class="shell">
              <img
                src="../img/800px-JoystickDirections.svg.png"
                alt="joystick 1"
              />
              <img src="../img/joystick2.png" alt="joystic 2" />
            </figure>
            <p class="type__text">Рисунки 1 и 2 - Конструкция джойстика</p>
          </div>
          <p class="intro__text">
            Конструкция джойстика:
          </p>
          <ol class="intro__list">
            <li class="intro__item">Рукоять</li>
            <li class="intro__item">Основание</li>
            <li class="intro__item">Основная кнопка</li>
            <li class="intro__item">Дополнительные кнопки</li>
            <li class="intro__item">Переключатель</li>
            <li class="intro__item">Имитатор колёсика</li>
            <li class="intro__item">Миниджойстик (hat switch, «хатка»)</li>
            <li class="intro__item">Присоски (крепление)</li>
          </ol>
          <p class="intro__text">
            Джойстик представляет собой ручку, наклоном которой, можно задавать
            направление в двумерной плоскости. На ручке, а также в платформе, на
            которой она крепится, обычно располагаются кнопки и переключатели
            различного назначения. Помимо координатных осей X и Y, возможно
            также изменение координаты Z, за счет вращения рукояти вокруг оси,
            наличия второй ручки, дополнительного колёсика и т. п.
          </p>
          <p class="intro__text">
            Широкое применение джойстик получил в компьютерных играх, но также
            может использоваться в других целях. По аналогии с этим устройством,
            джойстиком шутливо называют ручку управления промышленными
            механизмами и транспортными средствами (самолётом и др.).
          </p>
        </section>
        <section class="type">
          <h2 class="type__title" id="joistick__types">Типы джойстиков</h2>
          <p class="type__text">
            По количеству степеней свободы и, соответственно, плоскостей, в
            которых возможно изменение положения контролируемого объекта,
            джойстики подразделяются на:
          </p>
          <ul class="type__list">
            <li class="type__item">
              одномерные (управление перемещением объекта либо вверх-вниз, либо
              влево-вправо)
            </li>
            <li class="type__item">
              двумерные (управление объектом в двух плоскостях)
            </li>
            <li class="type__item">
              трёхмерные (управление объектом во всех трёх плоскостях)
            </li>
          </ul>
          <div class="d-flex flex-column flex-center">
            <figure class="shell">
              <img src="../img/j-1.jpg" alt="одномерный джойстик" />
              <img src="../img/j-2.jpg" alt="двумерный джойстик" />
              <img src="../img/j-3.jpg" alt="трёхмерный джойстик" />
            </figure>
            <p class="type__text">
              Рисунки 3, 4 и 5 - Одномерный, двумерный и трёхмерный джойстики
            </p>
          </div>
          <p class="type__text">
            Основное отличие трёхмерного джойстика от одномерного и двумерного
            заключается в том, что он может выполнять функцию обычной кнопки.
          </p>
        </section>
        <section class="type">
          <h2 class="type__title" id="joistick__technology">
            Технологии джойстиков
          </h2>
          <p class="type__text">
            Джойстики можно разделить на два вида
          </p>
          <ol class="type__list">
            <li class="type__item">
              дискретные — сенсоры таких джойстиков могут принимать два
              значения: «0» или «1», включён/выключен и т. д. При этом каждое
              нажатие выдает один управляющий импульс и смещает курсор на одну
              позицию (длительное нажатие приводит к автоповтору команды),
              диапазон смещения курсора при этом неограничен и определяется
              только количеством нажатий. Джойстики такого типа считаются
              устаревшими в ПК, но широко применяются в простых игровых
              приставках, мобильных телефонах и прочих устройствах.
            </li>
            <li class="type__item">
              аналоговые — у таковых выходной сигнал плавно меняется от нуля до
              максимума в зависимости от угла отклонения рукоятки: чем больше
              рукоять отклонена, тем больше уровень сигнала. Диапазон
              перемещения курсора ограничен ходом ручки джойстика и разрешением
              применённых сенсоров. После калибровки, подобные джойстики можно
              применять для указания абсолютной позиции курсора.
            </li>
          </ol>
          <p class="type__text">
            В свою очередь, аналоговые джойстики делятся на четыре типа:
          </p>
          <ul class="type__list">
            <li class="type__item">
              С аналоговым датчиком. Включает в себя потенциометр (резистор) и
              аналогово-цифровой преобразователь. Преимущества: нет особых
              требований к механике. Недостатки: требователен к качеству питания
              и АЦП, сам датчик при этом недостаточно долговечен. Интересно, что
              в игровом порту АЦП находится в компьютере, а не в джойстике.
            </li>
            <li class="type__item">
              С цифровым датчиком. В таких джойстиках используются энкодеры
              (оптические датчики наподобие тех, что применяются в компьютерных
              мышах — зубчатое колесо, при вращении пересекающее луч от
              светодиода к фотодиоду). Преимущества: очень чёткий ход, датчик
              практически вечен. Недостатки: чтобы датчик имел достаточное
              количество шагов дискретности (примерно 500 шагов на оборот руля,
              или 150 на движение джойстика от края до края, или 100 на ход
              педали), нужен или дорогой высокоточный энкодер, или качественный
              редуктор (мультипликатор).
            </li>
            <li class="type__item">
              С оптическим датчиком. Такие джойстики действуют аналогично
              оптической мыши и совмещают высокую точность с высокой
              надёжностью. Недостаток: применимо только для устройств с
              небольшим ходом ручки.
            </li>
            <li class="type__item">
              С магнитным датчиком — долговечные бесконтактные датчики:
              магниторезистивные и датчики на эффекте Холла.
            </li>
          </ul>
          <p class="type__text">
            Ранее джойстики для ПК подключались к нему через игровой порт, далее
            полностью произошёл переход к стандартному интерфейсу USB.
          </p>
          <p class="type__text">
            Долгое время у игровых приставок джойстики подключались через
            специализированный разъём, специфичный для каждой
            фирмы-производителя, поэтому джойстик для одной приставки не
            подходил к другой или же к ПК. В настоящее время джойстики имеют
            стандартный интерфейс USB, поэтому могут подключаться как к
            приставке, так к персональному компьютеру.
          </p>
        </section>
        <!-- <section class="type">
          <h2 class="type__title" id="joystick__additional_information">
            Дополнительные органы управления
          </h2>
          <ul class="type__list">
            <li class="type__item">
              Тумблер автоматического огня — делает, чтобы основная кнопка
              стрельбы (как правило, находящаяся под указательным пальцем) была
              постоянно «нажата». Применяется в основном в скролл-леталках.
            </li>
            <li class="type__item">
              Мини-джойстик (hat switch, в просторечии «хатка») — позволяет
              компактно разместить 4—8 редко используемых кнопок; также удобен
              для управления меню или переключения видов (вперёд, назад, вбок).
            </li>
            <li class="type__item">
              Ползунок, колесо или отдельный рычаг газа — управляет работой
              двигателей.
            </li>
            <li class="type__item">
              Педали или поворотная ручка — для управления рулём направления.
              Педали удобнее; ручка, поворачивающаяся вокруг своей оси — дешёвый
              заменитель педалей. В некоторых дорогих джойстиках (часть моделей
              Saitek) игрок, докупив педали, может зафиксировать поворотную
              ручку.
            </li>
            <li class="type__item">
              Дополнительные колёса/ползунки, встречающиеся в дорогих джойстиках
              и предназначенные для управления различными дополнительными
              параметрами авиасимуляторов (например, шаг винта)
            </li>
          </ul>
        </section> -->
        <section class="type">
          <h2 class="type__title">
            Интерфейс игровых устройств – Game-порт
          </h2>
          <p class="type__text">
            Игровые устройства – джойстик, руль и педали автомобиля и иные –
            вырабатывают некоторые аналоговые и дискретные сигналы, которые
            можно ввести в компьютер. С самых первых моделей IBM PC был введен и
            практически стандартизирован интерфейс игрового адаптера – Game
            port, к которому можно подключить до двух джойстиков или иных
            цстройств.
          </p>
          <p class="type__text">
            Суммарно на порте доступно 4 координатных датчика (X1, X2, Y1 и Y2),
            изменяющих сопротивление, и 4 дискретных входа для кнопок
            управления. Назначение координатных датчиков зависит от игры и
            конструкции манипулятора. Для авиасимуляторов X1 может
            соответствовать перемещение рукояти вверх-вниз, Y1 – влево-вправо,
            X2 – нажатие левой и правой педалей, Y2 – тормоз (газ и тормоз могут
            быть совмещены в координате Y1). Кроме игровых целей порт может
            применяться для подключения «серьезных» датчиков.
          </p>
          <p class="type__text">
            Современные игровые устройства имеют свой интеллект
            (микроконтроллер) и подкключаются к компьютеру цифровым интерфейсом
            – по шине USB или через COM-порт. Их функциональные возможности
            богаче, они позволяют устанавливать и двустороннюю связь с игроками
            (вводить механические воздействия).
          </p>
          <p class="type__text">
            Адаптер Game-порта имеет в пространстве ввода-вывода один регистр с
            адресом 201h, биты которого при чтении отображают состояние кнопок и
            компараторов аналоговых сигналов. Ввод дискретных сигналов от кнопок
            и компаратов аналоговых сигналов. Ввод дискретных сигналов от кнопок
            пояснений не требует. Упрощённая схема одного канала аналогового
            ввода приведена на рис. 1. В начале преобразования конденсатор
            разряжается через ключ, после чего начинается его заряд, скорость
            которого определяется величиной сопротивления датчика (чем больше
            сопротивление, тем медленнее заряд). Напряжение на конденсаторе
            контролируется компаратором, который срабатывает по достижении
            определённого уровня.
          </p>
          <p class="type__text">
            Выходы компараторов всех четырёх каналов преобразования, как и
            дискретные входы, собираются в регистр (см. Ниже), который может
            быть программно считан. Преобразование выполняется чисто программно
            и начинается по выводу любого байта в регистр адаптера (201h), при
            этом биты 0-3 устанавливаются в единицу. Далее программа циклически
            выполняет чтение регистра и измеряет время до возврата в нулевое
            состояние бит 0-3, соответствующих четырём аналоговым каналам. Если
            аналоговый вход закорочен на шину GND или цепь измеряемого
            сопротивления разорвана, соответствующий бит не обнулился. Поэтому в
            программе преобразования должен быть предусмотрен тайм-аут. Для
            измеряемых сопротивлений в диапазоне 0-100 кОм время определяется по
            вормуле: T(мкс)=24,2+11×R (кОм).
          </p>
          <p class="type__text">
            Точность и линейность преобразования невысока, преобразование
            выполняется не быстро (до 1,12 мс) и сильно загружает процессор.
            Однако в отличие от «настоящих» аналого-цифровых преобразователей,
            этот достаётся даром – игровой адаптер входит в состав практически
            всех комбинированных плат последовательных и параллельных портов и
            звуковых карт.
          </p>

          <div class="d-flex flex-column flex-center">
            <div class="shell-plus-plus">
              <img
                src="../img/channel-analog-scheme.jpg"
                alt="analog channel"
              />
            </div>
            <p class="type__text">
              Рисунок 6 - Схема канала аналогового ввода
            </p>
          </div>

          <p class="type__text">
            Порт имеет разъем-розетку DB-15S. Назначение выводов и соответствие
            сигналов битам регистра приведено в табл. 1. Резисторы подключаются
            к шине питания +5В, кнопки – к шине GND (рис. 2). Замыканию кнопок
            соответствуют нули в битах 5-7. Аналоговые каналы можно использовать
            для дискретного ввода, если их входы подключить к кнопкам,
            замыкающим их на шину GND, и к резисторам, «подтягивающим» их к
            уровню +5В. Два джойстика (А и В) подключаются через Y-образный
            переходник-разветвлитель. На звуковых картах через разъём «Game»
            вместе с джойстиками могут подключаться и внешние MIDI-устройства,
            использую специальный кабель-адаптер, обеспечивающий гальваническую
            развязку входного сигнала и ограничение выходного тока. Для
            интерфейса MIDI используются контакты 12 и 15, ранее
            предназначавшиеся для шин GND и +5V. Такое назначение делает
            безопасным подключение адаптера MIDI к «чистому» игровому порту и
            обычного джойстика к игровому порту с сигналами MIDI.
          </p>

          <table class="table table-sm">
            <caption>
              Таблица 1 - Интерфейс игрового адаптера и MIDI
            </caption>
            <thead>
              <tr>
                <th>Бит</th>
                <th>Назначение</th>
                <th>Контакт</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>7</td>
                <td>Джойстик B кнопка #2</td>
                <td>14</td>
              </tr>
              <tr>
                <td>6</td>
                <td>Джойстик B кнопка #1</td>
                <td>10</td>
              </tr>
              <tr>
                <td>5</td>
                <td>Джойстик А кнопка #2</td>
                <td>7</td>
              </tr>
              <tr>
                <td>4</td>
                <td>Джойстик А кнопка #1</td>
                <td>2</td>
              </tr>
              <tr>
                <td>3</td>
                <td>Джойтик В Y-координата (Y2)</td>
                <td>13</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Джойтик В X-координата (X2)</td>
                <td>11</td>
              </tr>
              <tr>
                <td>1</td>
                <td>Джойтик A Y-координата (Y1)</td>
                <td>6</td>
              </tr>
              <tr>
                <td>0</td>
                <td>Джойтик A X-координата (X1)</td>
                <td>3</td>
              </tr>
              <tr>
                <td>-</td>
                <td>GND</td>
                <td>4, 5</td>
              </tr>
              <tr>
                <td>-</td>
                <td>+5 B</td>
                <td>1, 8, 9</td>
              </tr>
              <tr>
                <td>-</td>
                <td>MIDI In (Rx) – вход (на звуковой карте)</td>
                <td>15</td>
              </tr>
              <tr>
                <td>-</td>
                <td>MIDI Out (Tx) – выход (на звуковой карте)</td>
                <td>12</td>
              </tr>
            </tbody>
          </table>

          <div class="d-flex flex-column flex-center">
            <div class="shell-plus-plus">
              <img src="../img/da-15.jpg" alt="port da-15" />
            </div>
            <p class="type__text">
              Рисунок 7 - Распиновка игрового порта (DB15)
            </p>
          </div>

          <div class="d-flex flex-column flex-center">
            <div class="shell-plus-plus">
              <img
                src="../img/sensor-to-game-adapter.jpg"
                alt="подключение датчика к гейм адаптеру"
              />
            </div>
            <p class="type__text">
              Рисунок 8 - Подключение датчиков к игровому адаптеру
            </p>
          </div>

          <p class="type__text">
            Системную поддрежку джойстика обеспечивает сервис BIOS Int 15h при
            AH=84h.
          </p>
          <p class="type__text">
            При вызове в DX задаётся код подфункции:
          </p>
          <ul class="type__list">
            <li class="type__item">
              DX=0 – опрос кнопок, возвращает в AL[7:4] состояние кнопок
              (соответствует битам порта 201h);
            </li>
            <li class="type__item">
              DX=1 – чтение координат X, Y джойстика A (в регистры AX, BX) и B
              (в CX, DX).
            </li>
          </ul>
          <p class="type__text">
            При ошибочном задании кода в DX устанавливается CF=1. Стандартный
            джойстик поддерживается и OC Windows.
          </p>
        </section>
      </div>
      <footer class="container main-footer">
        <div class="info">
          <p class="my-col">
            Руководитель:
            <span class="teacher">
              Прудников В.М.
            </span>
          </p>
          <p class="my-col">
            Исполнители: <span>Наконечный А.В. и Ивашнёв М.И.</span>
          </p>
        </div>
        <address class="address">
          Белорусско-Российский университет, кафедра "Автоматизированные системы
          управления" © 2019
        </address>
      </footer>
    </div>
  </body>
</html>
